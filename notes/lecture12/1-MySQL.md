# Intro to MySQL
MySQL is a type of database server or database management system (DBMS). A database server is a program that is able to store and organize large amounts of information and is easily accessible from programming languages like PHP.  We can search of the information stored in a database by creating a *query*.  A query is a request for information from the database generated by the user with specific parameters to be met.  In order to create a query, MySQL uses a *structured query language* (SQL) to specify what information should be returned.

An example of a query in plain English could be something like...

```
Get all information on every student available
```

Translating this to a structure query language, it would look like...

```sql
SELECT * FROM students
```

Where `SELECT` is the action we want to perform, `*` is a special character that means *all* or *everything*, and `students` is the *table* we want to select from.

## Database tables
A database consists of one or more *tables*.  A database table is very similar to a table in Microsoft Excel - the columns make up the *fields* of the table and each row is considered the *record* for the specific entry.

| id | firstname | lastname              | credits |
| -- | --------- | --------------------- |-------- |
| 1  | smitty    | werbenjagermanjensen  | 124     |
| 2  | john      | smith                 | 42      |
| 3  | michael   | gacia                 | 122     |
| 3  | yuraima   | estevez               | 80      |

Because databases can have more than one table, each table needs to be uniquely identified with a name.  Let's name the above table the `students` table.

## Accessing MySQL via the command line
We can access MySQL by using the command line.  Through the command line, we can run SQL commands to create, read, update, and delete (CRUD) the data stored in our database(s).  Open up the command line and run the following command:

```
/Applications/MAMP/Library/bin/mysql -uroot -proot
```

**NOTE** MAMP must be running in order to use the CLI.

This should start the MAMP MySQL command line interface (cli) and log in using the username `root` and password `root`.  Now that we're logged into MySQL, run your first command to display the databases we have avalable.

```sql
SHOW databases;
```

### Using the MySQL CLI

#### The Semi-colon `;`
First thing to note about the MySQL command above is that we added a semi-colon at the end of it.  This indicates to  MySQL that we have finished entering a command and it should run it.  The semi-colon is useful so that we can use multiple lines in our queries when they get too long.

#### Cancelling a command
If you want to cancel a command you started to write without actually running it, enter the `\c` command and press the enter key.

#### Exiting the CLI
When you are done using the CLI and want to quit out of the program, you can enter the `exit` command to quit.  If you need to immediately abort the CLI, you can use the `CTRL + c` keyboard shortcut.

## Creating a database
To create a new database, run the command:

```sql
CREATE DATABASE database_name;
```

*Yes, it's that simple.*\*

*Not really...

## Using a database
Before we can query tables in a specific database, we need to tell the MySQL CLI *which* database we would like to work with:

```sql
USE database_name;
```

## Delete Database
To delete a database you can run:

```sql
DROP DATABASE database_name
```

## Create a table
Now that the CLI knows which database it should be using, we can start creating our database tables.  Each database table needs to have a specific structure that is defined by its user.  The structure needs to include the name of the table, the columns that make up the table, and data types for each column.  You can also decide to have a unique identifier for the table records, choose how much data can be stored in a column, if the column should require some value when created, etc.

```sql
CREATE TABLE students (
  id INT UNSIGNED NOT NULL AUTO_INCREMENT KEY,
  firstname VARCHAR(128),
  lastname VARCHAR(128),
  credits INT(3)
);
```

This statement has accomplished the following:

- created a new table called `students`.
- The `id` column of type integer (`INT`), that *cannot* be empty (`NOT NULL`), will automatically increment with each new row (`AUTO_INCREMENT`), and that is the *unique identifier* for each record (`KEY`).
- The `firstname` column that can be text of up to 128 characters `VARCHAR(28)`.
- The `lastname` column that can be text of up to 128 characters `VARCHAR(28)`.
- The `earned_credits` column records an integer of up to 3 digits long.

**NOTE** There are many kinds of [data types](https://dev.mysql.com/doc/refman/5.7/en/data-types.html) in MySQL.  Review the documentation to discover which ones are appropriate to use for your projects.

To ensure that the table was created, list out all available tables for this database using the `SHOW` command.

```sql 
SHOW tables;
```

Using the `DESCRIBE` command MySQL will display the structure of a table you specify.

```sql
DESCRIBE school;
```

Will display:

```
+----------------+------------------+------+-----+---------+----------------+
| Field          | Type             | Null | Key | Default | Extra          |
+----------------+------------------+------+-----+---------+----------------+
| id             | int(10) unsigned | NO   | PRI | NULL    | auto_increment |
| firstname      | varchar(128)     | YES  |     | NULL    |                |
| lastname       | varchar(128)     | YES  |     | NULL    |                |
| credits        | int(3)           | YES  |     | NULL    |                |
+----------------+------------------+------+-----+---------+----------------+
```

## Delete a table
To delete a table you can use the `DROP` command.

```sql
DROP TABLE database_name
```

## Adding records
To add records to a table, you need to use the following command:

```sql
INSERT INTO tablename (field1, field2, field3 ...)
  VALUES (value1, value2, value3);
```

For the `INSERT` command, you specify which columns to insert the data into.  For `VALUES`, you list out each column's value in the same order that it occurred in `INSERT`.

```sql
INSERT INTO students (firstname, lastname, credits)
  VALUES ("Yuraima", "Estevez", 102);
```

## Querying a database
Now that our database and table is set up, let's query some data.

### `SELECT`
The `SELECT` command is used to extract data from a table.  The basic structure for this command looks like:

```sql
SELECT something FROM tablename;
```

Where the `something` can be `*` to select everything from the table, a list of column names to only display those fields for each record, or another expression to make up the data that should be extracted.

```sql
SELECT * FROM students;
```

Will select all of the information from the `students` table.

```
+----+-----------+----------+---------+
| id | firstname | lastname | credits |
+----+-----------+----------+---------+
|  1 | Yuraima   | Estevez  | 102     |
+----+-----------+----------+---------+
```

```sql
SELECT firstname, lastname FROM students;
```

Will only display the first and last name of each student record.

```
+-----------+----------+
| firstname | lastname |
+-----------+----------+
| Yuraima   | Estevez  |
+-----------+----------+
```

### `DELETE`
`DELETE` will remove the records returned by the query from the table selected.

```sql
DELETE FROM students;
```

Will delete *all* records from the `students` table.

### `WHERE` 
The `WHERE` keyword let's you narrow down queries by returning only those that match the condition being set.

```sql
-- deletes any record from students table with firstname of "yuraima"
DELETE FROM students
WHERE firstname="Yuraima";
```

```sql
SELECT firstname, lastname FROM students
WHERE lastname = "Yuraima"
```

### `UPDATE` and `SET`
`UPDATE` and `SET` are used to update the record that gets returned by the query.

```sql
UPDATE tablename SET column="value";
```

```sql
-- updates the firstname to "Yurm" for any records with the lastname of "Estevez"
UPDATE students
SET firstname="Yurm"
WHERE lastname="Estevez";
```

## Changing a table's structure
Once you have created a table structure, it can still be changed with the `ALTER` command.

### Rename a table

```sql
ALTER TABLE current_tablename new_tablename;
```
---
```sql
ALTER TABLE students students_info;
```

### Change data type of column

```sql
ALTER TABLE tablename MODIFY col new_type;
```
---
```sql
ALTER TABLE students MODIFY credits SMALLINT;
```

### Add a new column

```sql
ALTER TABLE tablename ADD new_col col_type;
```
---
```sql
ALTER TABLE students ADD dob INT(4);
```

### Rename a column

```sql
ALTER TABLE tablename CHANGE current_col new_col col_type;
```
---
```sql
ALTER TABLE tablename CHANGE credits earned_credits INT(3);
```
### Removing a Column

```sql
ALTER TABLE tablename DROP col_name;
```
---
```sql
ALTER TABLE students DROP credits;
```

___

[Next - MySQL in PHP »](2-MySQL+PHP.md)

[« Back - Intro ](.md)
